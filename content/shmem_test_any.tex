\apisummary{
  Indicate whether any one variable within an array of variables on the local \ac{PE} meets a specified test condition.
}

\begin{apidefinition}

\begin{C11synopsis}
size_t @\FuncDecl{shmem\_test\_any}@(TYPE * restrict ivars, size_t nelems, int * restrict status,
    int cmp, TYPE cmp_value);
\end{C11synopsis}
where \TYPE{} is one of the point-to-point synchronization types specified by
Table \ref{p2psynctypes}.

\begin{Csynopsis}
size_t @\FuncDecl{shmem\_\FuncParam{TYPENAME}\_test\_any}@(TYPE * restrict ivars, size_t nelems,
    int * restrict status, int cmp, TYPE cmp_value);
\end{Csynopsis}
where \TYPE{} is one of the point-to-point synchronization types and has a
corresponding \TYPENAME{} specified by Table \ref{p2psynctypes}.

\begin{apiarguments}

  \apiargument{IN}{ivars}{A pointer to an array of remotely accessible data
    objects.}
  \apiargument{IN}{nelems}{The number of elements in the \VAR{ivars} array.}
  \apiargument{INOUT}{status}{An optional mask array of length \VAR{nelems}
    that indicates which elements in \VAR{ivars} are excluded from the test set.}
  \apiargument{IN}{cmp}{A comparison operator from Table~\ref{p2p-consts}
    that compares elements of \VAR{ivars} with \VAR{cmp\_value}.}
  \apiargument{IN}{cmp\_value}{The value to be compared with the objects
    pointed to by \VAR{ivars}.}

\end{apiarguments}

\apidescription{
    The \FUNC{shmem\_test\_any} routine behaves similarly to
    \FUNC{shmem\_wait\_until\_any}, but it does not block and returns zero if
    no conditions are satisfied.  This routine compares each of the
    \VAR{nelems} elements in the \VAR{ivars} array with the value
    \VAR{cmp\_value} according to the comparison operator \VAR{cmp} at the
    calling PE.  The order in which these elements are tested is unspecified.
    If an entry $i$ in \VAR{ivars} within the test set satisfies the test
    condition, a series of calls to \FUNC{shmem\_test\_any} must eventually
    return $i$.

    The optional \VAR{status} array passed to \FUNC{shmem\_test\_any} has the
    same behavior as in \FUNC{shmem\_wait\_until\_any} in
    Section~\ref{subsec:shmem_wait_until_any}.   Each element of \VAR{status}
    corresponds to the respective element in \VAR{ivars} and indicates whether
    the element is excluded from the test set.  On input, the \VAR{status}
    array indicates which elements are excluded from the test set.  If all
    elements in \VAR{status} are set to 1 or \VAR{nelems} is 0, the test set is
    empty and this routine returns 0.  On output, the \VAR{status} array
    indicates which elements satisfied the test condition in \VAR{ivars} or
    were ignored.  If \VAR{status} is a null pointer, it is ignored and all
    elements in \VAR{ivars} are included in the test set.
}

\apireturnvalues{
    \FUNC{shmem\_test\_any} returns the index of an element in the \VAR{ivars}
    array that satisfies the test condition. If the test set is empty or no
    conditions are satisfied, this routine returns SIZE\_MAX.
}

\apinotes{
  None.
}

\begin{apiexamples}
  \apicexample
      {The following \CorCpp{} example demonstrates the use of
      \FUNC{shmem\_test\_any} to implement a simple linear barrier
      synchronization while potentially overlapping communication with
      computation.}
      {./example_code/shmem_test_any_example.c}
      {}
\end{apiexamples}

\end{apidefinition}
